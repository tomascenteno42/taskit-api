# Migration `20200712155655-create-task`

This migration has been generated by Teodoro Villanueva at 7/12/2020, 3:56:55 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "TaskStatus" AS ENUM ('COMPLETED', 'IN_PROGRESS', 'PENDING');

CREATE TABLE "public"."User" (
"createdAt" timestamp(3)  NOT NULL ,
"email" text  NOT NULL ,
"id" SERIAL,
"name" text  NOT NULL ,
"password" text  NOT NULL ,
"updatedAt" timestamp(3)   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Board" (
"authorId" integer  NOT NULL ,
"createdAt" timestamp(3)  NOT NULL ,
"id" SERIAL,
"name" text  NOT NULL ,
"updatedAt" timestamp(3)   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Task" (
"authorId" integer  NOT NULL ,
"board_id" integer  NOT NULL ,
"content" text  NOT NULL ,
"createdAt" timestamp(3)  NOT NULL ,
"id" SERIAL,
"status" "TaskStatus" NOT NULL ,
"updatedAt" timestamp(3)   ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

ALTER TABLE "public"."Board" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Task" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Task" ADD FOREIGN KEY ("board_id")REFERENCES "public"."Board"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200712155153-create-board..20200712155655-create-task
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -14,8 +14,9 @@
   password  String
   boards    Board[]
   createdAt DateTime
   updatedAt DateTime?
+  tasks      Task[]
 }
 model Board {
   id        Int       @id @default(autoincrement())
@@ -23,5 +24,24 @@
   authorId  Int
   author    User      @relation(fields: [authorId], references: [id])
   createdAt DateTime
   updatedAt DateTime?
+  tasks      Task[]
 }
+
+enum TaskStatus {
+  COMPLETED
+  IN_PROGRESS
+  PENDING
+}
+
+model Task {
+  id        Int        @id @default(autoincrement())
+  content   String
+  status    TaskStatus
+  authorId  Int
+  author    User       @relation(fields: [authorId], references: [id])
+  board_id  Int
+  board     Board      @relation(fields: [board_id], references: [id])
+  createdAt DateTime
+  updatedAt DateTime?
+}
```


